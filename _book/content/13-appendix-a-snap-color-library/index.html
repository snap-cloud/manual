<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="A manual for Snap! TODO">

<title>Appendix A — Appendix A. Snap! color library – Snap! Reference Manual</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/14-appendix-b-apl-features/index.html" rel="next">
<link href="../../references.bib" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-c09c9fbbb0eb80a11083d72da712c037.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="https://snap.berkeley.edu/" class="navbar-brand navbar-brand-logo">
    <img src="../../images/snap-logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="https://snap.berkeley.edu/">
    <span class="navbar-title">Snap! Reference Manual</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
    <a href="https://github.com/snap-cloud/snap-manual/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="../../snap-manual.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/13-appendix-a-snap-color-library/index.html">Appendices</a></li><li class="breadcrumb-item"><a href="../../content/13-appendix-a-snap-color-library/index.html"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Appendix A. Snap<em>!</em> color library</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../images/snap-logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Snap! Reference Manual</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/00-acknowledgements/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Acknowledgements</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/01-blocks-scripts-and-sprites/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Blocks, Scripts, and Sprites</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/02-saving-and-loading-projects-and/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Saving and Loading Projects and Media</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/03-building-a-block/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Building a Block</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/04-first-class-lists/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">First class lists</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/05-typed-inputs/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Typed Inputs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/06-procedures-as-data/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Procedures as Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/07-object-oriented-programming-with-sprites/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Object Oriented Programming with Sprites</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/08-oop-with-procedures/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">OOP with Procedures</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/09-the-outside-world/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The Outside World</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/10-continuations/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Continuations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/11-metaprogramming/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Metaprogramming</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/12-user-interface-elements/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">User Interface Elements <span></span></span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/13-appendix-a-snap-color-library/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Appendix A. Snap<em>!</em> color library</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/14-appendix-b-apl-features/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Appendix B. APL features</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/index-list.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Index</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/definition-of-blocks/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Definitions of Each Block in Snap<strong>!</strong></span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction-to-color" id="toc-introduction-to-color" class="nav-link active" data-scroll-target="#introduction-to-color">Introduction to Color</a></li>
  <li><a href="#crayons-and-color-numbers" id="toc-crayons-and-color-numbers" class="nav-link" data-scroll-target="#crayons-and-color-numbers">Crayons and Color Numbers</a></li>
  <li><a href="#perceptual-spaces-hsv-and-hsl" id="toc-perceptual-spaces-hsv-and-hsl" class="nav-link" data-scroll-target="#perceptual-spaces-hsv-and-hsl">Perceptual Spaces: HSV and HSL</a></li>
  <li><a href="#mixing-colors" id="toc-mixing-colors" class="nav-link" data-scroll-target="#mixing-colors">Mixing Colors</a></li>
  <li><a href="#tldr" id="toc-tldr" class="nav-link" data-scroll-target="#tldr">tl;dr</a></li>
  <li><a href="#subappendix-geeky-details-on-fair-hue" id="toc-subappendix-geeky-details-on-fair-hue" class="nav-link" data-scroll-target="#subappendix-geeky-details-on-fair-hue">Subappendix: Geeky details on fair hue</a></li>
  <li><a href="#subappendix-geeky-details-on-color-numbers" id="toc-subappendix-geeky-details-on-color-numbers" class="nav-link" data-scroll-target="#subappendix-geeky-details-on-color-numbers">Subappendix: Geeky details on color numbers</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/snap-cloud/snap-manual/edit/main/content/13-appendix-a-snap-color-library/index.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/13-appendix-a-snap-color-library/index.html">Appendices</a></li><li class="breadcrumb-item"><a href="../../content/13-appendix-a-snap-color-library/index.html"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Appendix A. Snap<em>!</em> color library</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Appendix A — Appendix A. Snap<em>!</em> color library</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The Colors and Crayons library <span></span> provides several tools for manipulating color. Although its main purpose is controlling a sprite’s pen color, it also establishes colors as a first class data type:</p>
<p><img src="assets/image401.png" class="img-fluid" alt="image401.png"> <!--  style="width:3.13333in;height:0.51667in" alt="Macintosh HD:Users:bh:Desktop:crayon-Pen.png" / --></p>
<p>For people who just want colors in their projects without having to be color experts, we provide two simple mechanisms: a <em>color number</em> <span></span> scale with a broad range of continuous color variation and a set of 100 <em>crayons</em> organized by color family (ten reds, ten oranges, etc.) The crayons <span></span> include the block colors:</p>
<p><img src="assets/image1135.png" class="img-fluid" alt="image1135.png"> <!--  style="width:3.13333in;height:0.51667in" alt="Macintosh HD:Users:bh:Desktop:crayon-Pen.png" / --></p>
<p>For experts, we provide color selection by RGB, HSL, HSV, X11/W3C names, and variants on those scales.</p>
<p><img src="assets/image1136.png" class="img-fluid" alt="image1136.png"> <!--  style="width:7.16667in;height:1.1in" alt="Macintosh HD:Users:bh:Desktop:hsl-from-x11.png" / --></p>
<section id="introduction-to-color" class="level3">
<h3 class="anchored" data-anchor-id="introduction-to-color">Introduction to Color</h3>
<p>Your computer monitor can display millions of colors, but you probably can’t distinguish that many. For example, here’s red 57, green 180, blue 200: <img src="assets/image1137.png" class="img-fluid" alt="image1137.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:Google Chrome002.png" / --> And here’s red 57, green <em>182,</em> blue 200: <img src="assets/image1138.png" class="img-fluid" alt="image1138.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:Google Chrome001.png" / --> You might be able to tell them apart if you see them side by side: <img src="assets/image1137.png" class="img-fluid" alt="image1137.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:Google Chrome002.png" / --> <img src="assets/image1138.png" class="img-fluid" alt="image1138.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:Google Chrome001.png" / --> but maybe not even then.</p>
<p>Color space <span></span> —the collection of all possible colors—is three-dimensional, but there are many ways to choose the dimensions. RGB <span></span> (red-green-blue), the one most commonly used in computers, matches the way TVs and displays produce color. Behind every dot on the screen are three tiny lights: a red one, a green one, and a blue one. But if you want to print colors on paper, your printer probably uses a different set of three colors: CMY <span></span> (cyan-magenta-yellow). You may have seen the abbreviation CMYK <span></span>, which represents the common technique of adding black ink to the collection. (Mixing cyan, magenta, and yellow in equal amounts is supposed to result in black ink, but typically it comes out a muddy brown instead, because chemistry.) Other systems that try to mimic human perception are HSL <span></span> (hue-saturation-lightness) and HSV <span></span> (hue-saturation-value). There are many, many more, each designed for a particular purpose.</p>
<p>If you are a color professional—a printer, a web designer, a graphic designer, an artist—then you need to understand all this. It can also be interesting to learn about. For example, there are colors that you can see but your computer display can’t generate. If that intrigues you, look up <a href="https://en.wikipedia.org/wiki/Color_theory">color theory</a> <span></span> in Wikipedia.</p>
</section>
<section id="crayons-and-color-numbers" class="level3">
<h3 class="anchored" data-anchor-id="crayons-and-color-numbers">Crayons and Color Numbers</h3>
<p>But if you just want some colors in your project, we provide a simple, one-dimensional subset of the available colors. Two subsets, actually: <em>crayons</em> and <em>color numbers.</em> Here’s the difference:</p>
<p><img src="assets/image1139.png" class="img-fluid" alt="image1139.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:Google Chrome002.png" / --></p>
<p>The first row shows 100 distinct colors. They have names; this is pumpkin <img src="assets/image1145.png" class="img-fluid" alt="image1145.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:Google Chrome003.png" / --> <span></span>, and this is denim <img src="assets/image1146.png" class="img-fluid" alt="image1146.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:Google Chrome004.png" / --> <span></span>. You’re supposed to think of them as a big box of 100 crayons <span></span>. They’re arranged in families: grays, pinks, reds, browns, oranges, etc. But they’re not consistently ordered within a family; you’d be unlikely to say “next crayon” in a project. (But look at the crayon spiral on page <a href="#spirals">145</a>.) Instead, you’d think “I want this to look like a really old-fashioned photo” and so you’d find sepia <img src="assets/image1144.png" class="img-fluid" alt="image1144.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:Google Chrome005.png" / --> <span></span> as crayon number 33. You don’t have to memorize the numbers! You can find them in a menu with a submenu for each family. <span></span></p>
<p><img src="assets/image1140.png" class="img-fluid" alt="image1140.png"> <!--  style="width:5.79306in;height:0.3in" / --></p>
<p>Or, if you know the crayon name, just <img src="assets/image1147.png" class="img-fluid" alt="image1147.png"> <!--  style="width:2.15972in;height:0.25694in" alt="Macintosh HD:Users:bh:Desktop:set-crayon-name.png" / -->.</p>
<p>The crayon numbers are chosen so that skipping by 10 gives a sensible box of ten crayons <span></span> :</p>
<p><img src="assets/image1154.png" class="img-fluid" alt="image1154.png"> <!--  style="width:5.79306in;height:0.3in" / --></p>
<p>Alternatively, skipping by 5 gives a still-sensible set of twenty crayons <span></span> :</p>
<p><img src="assets/image1155.png" class="img-fluid" alt="image1155.png"> <!--  style="width:5.8in;height:0.3in" / --></p>
<p>The set of <em>color numbers</em> is arranged so that each color number is visually near each of its neighbors. Bright and dark colors alternate for each family. Color numbers <span></span> range from 0 to 99, like crayon numbers, but you can use fractional numbers to get as tiny a step as you like:</p>
<p><img src="assets/image1141.png" class="img-fluid" alt="image1141.png"> <!--  style="width:5.79306in;height:0.3in" / --></p>
<p>(“As tiny as you like” isn’t <em>quite</em> true because in the end, your color has to be rounded to integer RGB values for display.)</p>
<p>Both of these scales include the range of shades of gray <span></span>, from black to white. Since black is the initial pen color, and black isn’t a hue, Scratch and Snap<em>!</em> users would traditionally try to use set color to escape from black, and it wouldn’t work. By including black in the same scale as other colors, we eliminate the Black Hole problem <span></span> if people use only the recommended color scales.</p>
<p>We are making a point of saying “color number” for what was sometimes called just “color” in earlier versions of the library, because we now reserve the name “color” for an actual color, an instance of the color data type.</p>
<p><strong>How to Use the Library</strong></p>
<p>There are three library blocks specifically about controlling the pen. They have the same names as three of the primitive Pen blocks:</p>
<p><img src="assets/image1156.png" class="img-fluid" alt="image1156.png"> <!--  style="width:5.79306in;height:0.3in" / --></p>
<p>The first (Pen block-colored) input slot is used to select which color scale you want to use. (These blocks also allow reading or setting two block properties that are not colors: the pen size and its transparency.) The pen reporter <span></span> requires no other inputs; it reports the state of the pen in whatever dimension you choose.</p>
<p><img src="assets/image1157.png" class="img-fluid" alt="image1157.png"> <!--  style="width:5.79306in;height:0.3in" / --></p>
<p>As the last example shows, you can’t ask for the pen color in a scale incompatible with how you set it, unless the block can deduce what you want from what it knows about the current pen color.</p>
<p>The change pen block <span></span> applies only to numeric scales (including vectors of three or four numbers). It adds its numeric or list input to the current pen value(s), doing vector (item-by-item) addition for vector scales.</p>
<p>The set pen block <span></span> changes the pen color to the value(s) you specify. The meaning of the white input slots depends on which attribute of the pen you’re setting:</p>
<p><img src="assets/image1158.png" class="img-fluid" alt="image1158.png"> <!--  style="width:5.79306in;height:0.3in" / --></p>
<p>In the last example, the number 37 sets the <em>transparency,</em> on the scale 0=opaque, 100=invisible. (All color attributes are on a 0–100 scale except for RGB components, which are 0–255.) A transparency <span></span> value can be combined with any of these attribute scales.</p>
<p>The library also includes two constructors and a selector for colors as a data type:</p>
<p><img src="assets/image1159.png" class="img-fluid" alt="image1159.png"> <!--  style="width:5.79306in;height:0.3in" / --></p>
<p>The latter two are inverses of each other, translating between colors and their attributes. The color from block’s <span></span> attribute menu has fewer choices than the similar set pen block because you can, for example, set the Red value of the existing pen color leaving the rest unchanged, but when creating a color out of nothing you have to provide its entire specification, e.g., all of Red, Green, and Blue, or the equivalent in other scales. (As you’ll see on the next page, we provide two <em>linear</em> (one-dimensional) color scales that allow you to specify a color with a single number, at the cost of including only a small subset of the millions of colors your computer can generate.) If you have a color and want another color that’s the same except for one number, as in the Red example, you can use this block:</p>
<p><img src="assets/image402.png" class="img-fluid" alt="image402.png"> <!--  style="width:1.80556in;height:0.19444in" alt="Macintosh HD:Users:bh:Desktop:color-from-and.png" / --></p>
<p>Finally, the library includes the mix block <span></span> and a helper:</p>
<p><img src="assets/image1160.png" class="img-fluid" alt="image1160.png"> <!--  style="width:5.79306in;height:0.3in" / --></p>
<p>We’ll have more to say about these after a detour through color theory.</p>
<p>That’s all you have to know about colors! <em>Crayons</em> for specific interesting ones, <em>color numbers</em> for gradual transformation from one color to the next. But there’s a bit more to say, if you’re interested. If not, stop here. (But look at the samples of the different scales on page <a href="#spirals">145</a>.)</p>
<p><strong>More about Colors: Fair Hues and Shades</strong></p>
<p>Several of the three-dimensional arrangements of colors use the concept of “hue <span></span>,” which more or less means where a color would appear in a rainbow <span></span> (magenta <span></span>, near the right, is <a href="https://en.wikipedia.org/wiki/Magenta">a long story</a>):</p>
<p><img src="assets/image1189.png" class="img-fluid" alt="image1189.png"> <!--  style="width:5.80667in;height:0.30667in" / --></p>
<p>These are called “spectral <span></span>” colors, after the <em>spectrum</em> of rainbow colors. But these colors aren’t equally distributed. There’s an awful lot of green, hardly any yellow, and just a sliver of orange. And no brown at all.</p>
<p>And this is already a handwave, because the range of colors that can be generated by RGB monitors doesn’t include some of the <em>true</em> spectral colors. See <a href="https://en.wikipedia.org/wiki/Spectral_color">Spectral color</a> in Wikipedia for all the gory details.</p>
<p>This isn’t a problem with the physics of rainbows. It’s in the human eye and the human brain that certain ranges of wavelength of light waves are lumped together as named colors. The eye is just “tuned” <span></span> to recognize a wide range of colors as green. (See <a href="https://en.wikipedia.org/w/index.php?title=Rods_and_cones">Rods and Cones</a>.) And different human cultures give names to different color ranges. Nevertheless, in old Scratch projects, you’d say change pen color by 1 and it’d take forever to reach a color that wasn’t green.</p>
<p>For color professionals, there are good reasons to want to work with the physical rainbow hue layout. But for amateurs using a simplified, one-dimensional color model, there’s no reason not to use a more programmer-friendly hue scale:</p>
<p><img src="assets/image1190.png" class="img-fluid" alt="image1190.png"> <!--  style="width:5.99444in;height:0.29931in" / --></p>
<p><img src="assets/image1191.png" class="img-fluid" alt="image1191.png"> <!--  style="width:1.45972in;height:1.35833in" / --></p>
<p>In this scale, each of the seven rainbow colors and brown get an equal share. (Red’s looks too small, but that’s because it’s split between the two ends: hue 0 is pure red, brownish reds are to its right, and purplish reds are wrapped around to the right end.) We call this scale “fair hue <span></span>” because each color family gets a fair share of the total hue range. (By the way, you were probably taught “… green, blue, indigo <span></span>, violet” in school, but it turns out that color names were different in Isaac Newton’s day, and the color he called “blue” is more like modern cyan, while his “indigo” is more like modern blue. See Wikipedia <a href="https://en.wikipedia.org/wiki/Indigo">Indigo</a>.)</p>
<p>Our <em>color number</em> scale is based on fair hues, adding a range of grays from black (color number 0 ) to white (color number 14) and also adding <em>shades</em> of the spectral colors. (In color terminology, a <em>shade</em> is a darker version of a color; a lighter version is called a <em>tint.</em>) Why do we add shades <span></span> but not tints <span></span> ? Partly because I find shades more exciting. A shade of red <img src="assets/image1195.png" class="img-fluid" alt="image1195.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:red.png" / --> can be dark candy apple red <img src="assets/image1194.png" class="img-fluid" alt="image1194.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:candy.png" / --> <span></span> or maroon <img src="assets/image1193.png" class="img-fluid" alt="image1193.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:maroon.png" / --> <span></span>, but a tint is just some kind of pink <img src="assets/image1192.png" class="img-fluid" alt="image1192.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:pink.png" / --> <span></span>. This admitted prejudice is supported by an objective fact: Most projects are made on a white background <span></span>, so dark colors stand out better than light ones.</p>
<p>So, in our color number scale, color numbers 0 to 14 are kinds of gray <span></span>; the remaining color numbers go through the fair hues, but alternating full-strength colors with shades.</p>
<p>crayons by 10</p>
<p>crayons by 5</p>
<p>crayons</p>
<p>fair hues</p>
<p>color numbers</p>
<p>color numbers by 5</p>
<p>color numbers by 10</p>
<p><img src="assets/image1197.png" class="img-fluid" alt="image1197.png"> <!--  style="width:0.23611in;height:0.23611in" alt="Macintosh HD:Users:bh:Desktop:pink.png" / --></p>
<p>This chart shows how the color scales <span></span> discussed so far are related. Note that all scales range from 0 to 100; the fair hues scale has been compressed in the chart so that similar colors line up vertically. (Its dimensions are different because it doesn’t include the grays at the left. Since there are eight color families, the pure, named fair hues are at multiples of 100/8=12.5, starting with red=0.)</p>
<p>White is crayon 14 and color number 14. This value was deliberately chosen <em>not</em> to be a multiple of 5 so that the every-fifth-crayon and every-tenth-crayon selections don’t include it, so that all of the crayons in those smaller boxes are visible against a white <span></span> stage background.</p>
<p><img src="assets/image1198.png" class="img-fluid" alt="image1198.png"> <!--  style="width:1.85in;height:1.07986in" alt="Macintosh HD:Users:bh:Desktop:Prism_compare_rainbow_01.png" / --></p>
<p>Among purples <span></span>, the official spectral violet <span></span> (crayon 90) is the end of the spectrum. Magenta <span></span>, brighter than violet, isn’t a spectral color at all. <span id="rainbow" class="anchor"></span>(In the picture at the left, the top part is the spectrum of white light spread out through a prism; the middle part is a photograph of a rainbow, and the bottom part is a digital simulation of a rainbow.) Magenta is a mixture of red and blue. (attribution: Wikipedia user Andys. CC BY-SA.)</p>
<p>The light gray at color number 10 is slightly different from crayon 10 just because of roundoff in computing crayon values. Color number 90 is different from crayon 90 because the official RGB violet (equal parts red and blue) is actually lighter than spectral violet. The purple family is also unusual because magenta, crayon and color number 95, is lighter than the violet at 90. In other families, the color numbers, crayons, and (scaled) fair hues all agree at multiples of ten. These multiple-of-ten positions are the standard RGB primary and secondary colors, e.g., the yellow at color number 50 is (255, 255, 0) in RGB. (Gray, brown, and orange don’t have such simple RGB settings.)</p>
<p>The color numbers at odd multiples of five are generally darker shades than the corresponding crayons. The latter are often official named shades, e.g., teal <span></span>, crayon 65, is a half-intensity shade of cyan <span></span>. The odd-five <em>color numbers,</em> though, are often darker, since they are chosen to be the darkest color in a given family that’s visibly different from black. The pink at color number 15, though, is quite different from crayon 15, because the former is a pure tint of red, whereas the crayon, to get a more interesting pink, has a little magenta mixed in. Color numbers at multiples of five are looked up in a table; other color values are determined by linear interpolation in RGB space. (<em>Crayons</em> are of course all found by table lookup.)</p>
<p>The from color block <span></span> behaves specially when you ask for the <em>color number</em> of a color. Most colors don’t exactly match a color number, and for other attributes of a color (crayon number, X11 name) you don’t get an answer unless the color exactly matches one of the names or numbers in that attribute. But for color number, the block tries to find the <em>nearest color number</em> <span></span> to the color you specify. The result will be only approximate; you can’t use the number you get to recreate the input color. But you can start choosing nearby color numbers as you animate the sprite.</p>
</section>
<section id="perceptual-spaces-hsv-and-hsl" class="level3">
<h3 class="anchored" data-anchor-id="perceptual-spaces-hsv-and-hsl">Perceptual Spaces: HSV and HSL</h3>
<p><img src="assets/image1199.png" class="img-fluid" alt="image1199.png"> <!--  style="width:0.73611in;height:0.72222in" alt="Macintosh HD:Users:bh:Desktop:blues.png" / --></p>
<p>RGB is the right way to think about colors if you’re building or programming a display monitor; CMYK is the right way if you’re building or programming a color printer. But neither of those coordinate systems is very intuitive if you’re trying to understand what color <em>you see</em> if, for example, you mix 37% red light, 52% green, and 11% blue. The <em>hue</em> scale is one dimension of most attempts at a perceptual scale. The square at the right has pale blues along the top edge, dark blues along the right edge, various shades of gray toward the left, black at the bottom, and pure spectral blue in the top right corner. Although no other point in the square is pure blue, you can tell at a glance that no other spectral color is mixed with the blue.</p>
<p><img src="assets/image1200.png" class="img-fluid" alt="image1200.png"> <!--  style="width:2.69167in;height:1.19028in" / --></p>
<p>Aside from hue, the other two dimensions of a color space have to represent how much white and/or black is mixed with the spectral color. (Bear in mind that “mixing black” is a metaphor when it comes to monitors. There really is black paint, but there’s no such thing as black light.) One such space, HSV <span></span>, has one dimension for the amount of color (vs.&nbsp;white), called <em>saturation,</em> and one for the amount of black, imaginatively called <em>value.</em> HSV stands for Hue-Saturation <span></span> -Value <span></span>. (Value is also called <em>brightness.</em>) The <em>value</em> is actually measured backward from the above description; that is, if value is 0, the color is pure black; if value is 100, then a saturation of 0 means all white, no spectral color; a saturation of 100 means no white at all. In the square in the previous paragraph, the <em>x</em> axis is the saturation and the <em>y</em> axis is the value. The entire bottom edge is black, but only the top left corner is white. HSV is the traditional color space used in Scratch and Snap<em>!.</em> Set pen color set the hue; set pen shade set the value. There was originally no Pen block to set the saturation, but there’s a set brightness effect Looks block to control the saturation of the sprite’s costume. (I speculate that the Scratch designers, like me, thought tints were less vivid than shades against a white background, so they made it harder to control tinting.)</p>
<p>attribution: Wikipedia user SharkD, CC BY-SA 3.0</p>
<p>But if you’re looking at colors on a computer display, HSV isn’t really a good match for human perception. Intuitively, black and white should be treated symmetrically. This is the HSL <span></span> (hue-saturation-lightness <span></span> ) color space.</p>
<p><img src="assets/image1203.png" class="img-fluid" alt="image1203.png"> <!--  style="width:0.76389in;height:0.76389in" alt="Macintosh HD:Users:bh:Desktop:HSL-blue.png" / --></p>
<p><em>Saturation,</em> in HSL, is a measure of the <em>grayness</em> or <em>dullness</em> of a color (how close it comes to being on a black-and-white scale) and <em>lightness</em> measures <em>spectralness</em> with pure white at one end, pure black at the other end, and spectral color in the middle. The <em>saturation</em> number is actually the opposite of grayness: 0 means pure gray, and 100 means pure spectral color, provided that the <em>lightness</em> is 50, midway between black and white. Colors with lightness other than 50 have some black or white mixed in, but saturation 100 means that the color is as fully saturated as it can be, given the amount of white or black needed to achieve that lightness. Saturation less than 100 means that <em>both white and black</em> are mixed with the spectral color. (Such mixtures are called <em>tones</em> of the spectral color.) Perceptually, colors with saturation 100% don’t look gray: <img src="assets/image1202.png" class="img-fluid" alt="image1202.png"> <!--  style="width:1.55556in;height:0.26597in" / --> but colors with saturation 75% do: <img src="assets/image1201.png" class="img-fluid" alt="image1201.png"> <!--  style="width:1.56389in;height:0.29306in" / --></p>
<p>Note that HSV and HSL both have a dimension called “saturation,” but <em>they’re not the same thing!</em> In HSV, “saturation” means non-whiteness, whereas in HSL it means non-grayness (vividness).</p>
<p>More fine print: It’s misleading to talk about the spectrum of light wavelengths as if it were the same as perceived hue. If your computer display is showing you a yellow area, for example, it’s doing it by turning on its red and green LEDs over that area, and what hits your retina <em>is still two wavelengths of light, red and green, superimposed.</em> You could make what’s perceptually the same yellow by using a single intermediate wavelength. Your eye and brain don’t distinguish between those two kinds of yellow. Also, your brain automatically adjusts perceived hue to correct for differences in illumination. When you place a monochrome object so that it’s half in sunlight and half in the shade, you see it as one even though what’s reaching your eyes from the two regions differs a lot. And, sadly, it’s HSL whose use of “saturation” disagrees with the official international color vocabulary standardization committee. I learned all this from <a href="http://www.huevaluechroma.com/011.php">this tutorial</a>, which you might find more coherent than jumping around Wikipedia if you’re interested.</p>
<p><img src="assets/image1204.png" class="img-fluid" alt="image1204.png"> <!--  style="width:1.64375in;height:0.84167in" / --></p>
<p>Although traditional Scratch and Snap<em>!</em> use HSV in programs, they use HSL in the color picker <span></span>. The horizontal axis is hue (fair hue <span></span> , in this version) and the vertical axis is <em>lightness,</em> the scale with black at one end and white at the other end. It would make no sense to have only the bottom half of this selector (HSV Value) or only the top half (HSV Saturation). And, given that you can only fit two dimensions on a flat screen, it makes sense to pick HSL saturation (vividness) as the one to keep at 100%. (In this fair-hue picker, some colors appear twice: “spectral” (50% lightness) browns as shades (≈33% lightness) of red or orange, and shades of those browns.)</p>
<p>Software that isn’t primarily about colors (so, <em>not</em> including Photoshop, for example) typically use HSV or HSL, with web-based software more likely to use HSV because that’s what’s built into the JavaScript <span></span> programming language provided by browsers. But if the goal is to model human color perception, neither of these color spaces is satisfactory, because they assume that all full-intensity spectral colors are equally bright. But if you’re like most people, you see spectral yellow <img src="assets/image1206.png" class="img-fluid" alt="image1206.png"> <!--  style="width:0.18889in;height:0.18889in" alt="Macintosh HD:Users:bh:Desktop:yellow.png" / --> as much brighter than spectral blue <img src="assets/image1205.png" class="img-fluid" alt="image1205.png"> <!--  style="width:0.20278in;height:0.20278in" / --> . There are better perceptual color spaces with names like L*u*v* <span></span> and L*a*b* <span></span> that are based on research with human subjects to determine true perceived brightness. Wikipedia explains all this and more at <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSL and HSV</a>, where they recommend ditching both of these simplistic color spaces. ☺</p>
</section>
<section id="mixing-colors" class="level3">
<h3 class="anchored" data-anchor-id="mixing-colors">Mixing Colors</h3>
<p>Given first class colors, the next question is, what operations apply to them, the way arithmetic operators apply to numbers and higher order functions apply to lists? The equivalent to adding numbers is mixing colors, but unfortunately there isn’t a simple answer to what that means.</p>
<p>The easiest kind of color mixing to understand is <em>additive</em> mixing, which is what happens when you shine two colored lights onto a (white) wall. It’s also what happens in your computer screen, where each dot (pixel) of an image is created by a tiny red light, a tiny green light, and a tiny blue light that can be combined at different strengths to make different colors. Essentially, additive mixing <span></span> of two colors is computed by adding the two red components, the two green components, and the two blue components. It’s not <em>quite</em> that simple only because each component of the result must be in the range 0 to 255. So, red (255, 0, 0) mixed with green (0, 255, 0) gives (255, 255, 0), which is yellow. But red (255, 0, 0) plus yellow (255, 255, 0) can’t give (510, 255, 0). Just limiting the red in the result to 255 would mean that red plus yellow is yellow, which doesn’t make sense. Instead, if the red value has to be reduced by half (from 510 to 255), then <em>all three</em> values must be reduced by half, so the result is (255, 128, 0), which is orange. (Half of 255 is 127.5, but each RGB value must be an integer.)</p>
<p><img src="assets/image1207.png" class="img-fluid" alt="image1207.png"> <!--  style="width:0.20278in;height:0.20278in" / --></p>
<p>A different kind of color mixing based on light is done when different colored transparent plastic sheets are held in front of a white light, as is done in theatrical lighting. In that situation, the light that gets through both filters is what remains after some light is filtered out by the first one and some of what’s left is filtered out by the second one. In red-green-blue terms, a red filter filters out green and blue; a yellow filter allows red and green through, filtering out blue. But there isn’t any green light for the yellow filter to pass; it was filtered out by the red filter. Each filter can only remove light, not add light, so this is called <em>subtractive</em> mixing:</p>
<p><img src="assets/image1208.png" class="img-fluid" alt="image1208.png"> <!--  style="width:0.20278in;height:0.20278in" / --></p>
<p>Perhaps confusingly, the numerical computation of subtractive mixing <span></span> is done by <em>multiplying</em> the RGB values, taken as fractions of the maximum 255, so red (1, 0, 0) times yellow (1, 1, 0) is red again.</p>
<p>Those are both straightforward to compute. Much, much more complicated is trying to simulate the result of mixing <em>paints</em> <span></span> <em>.</em> It’s not just that we’d have to compute a more complicated function of the red, green, and blue values; it’s that RGB values (or any other three-dimensional color space) are inadequate to describe the behavior of paints <span></span>. Two paints can look identical, and have the same RGB values, but may still behave very differently when mixed with other colors. The differences are mostly due to the chemistry of the paints, but are also affected by exactly how the colors are mixed. The mixing is mostly subtractive; red paint <em>absorbs</em> most of the colors other than red, so what’s reflected off the surface is whatever isn’t absorbed by the colors being mixed. But there can be an additive component also.</p>
<p>The proper mathematical abstraction to describe a paint is a <em>reflectance</em> graph <span></span>, like this:</p>
<p><img src="assets/image1209.png" class="img-fluid" alt="image1209.png"> <!--  style="width:0.20278in;height:0.20278in" / --></p>
<p>(These aren’t paints, but minerals, and one software-generated spectrum, from the US Geological Survey’s <a href="https://www.usgs.gov/labs/spec-lab/capabilities/spectral-library">Spectral Library</a>. The details don’t matter, just the fact that a graph like these gives much more information than three RGB numbers.) To mix two paints properly, you multiply the <em>y</em> values (as fractions) at each matching <em>x</em> coordinate of the two graphs.</p>
<p>Having said all that, the mix block takes the colors it is given as inputs and converts them into what we hope are <em>typical</em> paint reflectance spectra that would look like those colors, and then mixes those spectra and converts back to RGB.</p>
<p><img src="assets/image1230.png" class="img-fluid" alt="image1230.png"> <!--  style="width:4.34028in;height:0.65278in" alt="Macintosh HD:Users:bh:Desktop:5R-3G-paint.png" / --></p>
<p>But unlike the other two kinds of mixing, in this case we can’t say that these colors are “the right answer”; what would happen with real paints depends on their chemical composition and how they’re mixed. There are three more mixing options, but these three are the ones that correspond to real-world color mixing.</p>
<p>The mix block will accept any number of colors, and will mix them in equal proportion. If (for any kind of mixing) you want more of one color than another, use the color at weight block <span></span> to make a “weighted color”:</p>
<p><img src="assets/image1232.png" class="img-fluid" alt="image1232.png"> <!--  style="width:5.16667in;height:0.43056in" alt="Macintosh HD:Users:bh:Desktop:4R-1G-paint.png" / --></p>
<p>This mixes four parts red paint to one part green paint. All colors in a mixture can be weighted:</p>
<p><img src="assets/image1231.png" class="img-fluid" alt="image1231.png"> <!--  style="width:4.34028in;height:0.65278in" alt="Macintosh HD:Users:bh:Desktop:5R-3G-paint.png" / --></p>
<p>(Thanks to <a href="http://scottburns.us/subtractive-color-mixture/">Scott Burns <span></span></a> for his help in understanding paint mixing, along with <a href="http://www.huevaluechroma.com/061.php">David Briggs <span></span></a>’s tutorial. Remaining mistakes are bh’s.)</p>
</section>
<section id="tldr" class="level3">
<h3 class="anchored" data-anchor-id="tldr">tl;dr</h3>
<p>For normal people <span></span>, Snap<em>!</em> provides three simple, one-dimensional scales: <em><u>crayons</u></em> for specific interesting colors, <em><u>color numbers</u></em> for a continuum of high-contrast colors with a range of hues and shading, and <em><u>fair hues</u></em> for a continuum without shading. For color nerds <span></span>, it provides three-dimensional color spaces RGB, HSL, HSV, and fair-hue variants of the latter two. <span id="spirals" class="anchor"></span>We recommend “fair HSL <span></span>” for zeroing in on a desired color.</p>
<!-- ![image1241.png](assets/image1241.png)  style="width:1.53472in;height:1.84722in" alt="Macintosh HD:Users:bh:Desktop:squiral-script.png" / -->
<p><img src="assets/image1242.png" class="img-fluid" alt="image1242.png"> <!--  style="width:4.34028in;height:0.65278in" alt="Macintosh HD:Users:bh:Desktop:5R-3G-paint.png" / --></p>
</section>
<section id="subappendix-geeky-details-on-fair-hue" class="level3">
<h3 class="anchored" data-anchor-id="subappendix-geeky-details-on-fair-hue">Subappendix: Geeky details on fair hue</h3>
<p><img src="assets/image1243.png" class="img-fluid" alt="image1243.png"> <!--  style="width:4.34028in;height:0.65278in" alt="Macintosh HD:Users:bh:Desktop:5R-3G-paint.png" / --></p>
<p>The left graph shows that, unsurprisingly, all of the brown fair hue <span></span> s make essentially no progress in real hue, with the orange-brown section actually a little retrograde, since browns are really shades of orange and so the real hues overlap between fair browns and fair oranges. Green makes up some of the distance, because there are too many green real hues and part of the goal of the fair hue scale is to squeeze that part of the hue spectrum. But much of the catching up happens very quickly, between pure magenta at fair hue 93.75 and the start of the purple-red section at fair hue 97. This abrupt change is unfortunate, but the alternatives involve either stealing space from red or stealing space from purple (which already has to include both spectral violet and RGB magenta). The graph has discontinuous derivative at the table-lookup points, of which there are two in each color family, one at the pure-named-RGB colors at multiples of 12.5, and the other <em>roughly</em> halfway to the next color family, except for the purple family, which has lookup points at 87.5 (approximate spectral violet), 93.75 (RGB magenta), and 97 (turning point toward the red family). (In the color picker, blue captures cyan and purple space in dark shades. This, too, is an artifact of human vision.)</p>
<p>The right graph shows the HSV saturation and value for all the fair hues. Saturation is at 100%, as it should be in a hue scale, except for a very slight drop in part of the browns. (Browns are shades of orange, not tints, so one would expect full saturation, except that some of the browns are actually mixtures with related hues.) But value, also as expected, falls substantially in the browns, to a low of about 56% (halfway to black) for the “pure” brown at 45° (fair hue 12.5). But the curve is smooth, without inflection points other than that minimum-value pure brown.</p>
<p>“Fair saturation <span></span>” and “fair value <span></span>” are by definition 100% for the entire range of fair hues. This means that in the browns, the real saturation and value are the product (in percent) of the innate shading of the specific brown fair hue and the user’s fair saturation/value setting. When the user’s previous color setting was in a real scale and the new setting is in a fair scale, the program assumes that the previous saturation and value were entirely user-determined; when the previous color setting was in a brown fair hue and the new setting is also in a fair scale, the program remembers the user’s intention from the previous setting. (Internal calculations are based on HSV, even though we recommend HSL to users, because HSV comes to us directly from the JavaScript color management implementation.) This is why the set pen block includes options for “fair saturation” and so on.</p>
<p>For the extra-geeky, here are the exact table lookup points (fair hue <span></span>, [0,100]):</p>
<p><img src="assets/image1258.png" class="img-fluid" alt="image1258.png"> <!--  style="width:5.9875in;height:0.37847in" / --></p>
<p>and here are the RGB settings at those points:</p>
<p><img src="assets/image1259.png" class="img-fluid" alt="image1259.png"> <!--  style="width:5.98403in;height:1.37361in" / --></p>
</section>
<section id="subappendix-geeky-details-on-color-numbers" class="level3">
<h3 class="anchored" data-anchor-id="subappendix-geeky-details-on-color-numbers">Subappendix: Geeky details on color numbers</h3>
<p><img src="assets/image1260.png" class="img-fluid" alt="image1260.png"> <!--  style="width:2.08333in;height:2.29167in" alt="Macintosh HD:Users:bh:Desktop:integers.png" / --></p>
<p>Here is a picture of integer color numbers, but remember that color numbers are continuous. (As usual, “continuous” values are ultimately converted to integer RGB values, so there’s really some granularity.) Color numbers 0-14 are continuously varying grayscale, from 0=black to 14=white. Color numbers 14+ε to 20 are linearly varying shades of pink, with RGB Red at color number 20.</p>
<p>Beyond that point, in each color family, the multiple of ten color number in the middle is the RGB standard color of that family, in which each component is either 255 or 0. (Exceptions are brown, which is of course darker than any of those colors; orange, with its green component half-strength: [255, 127, 0]; and violet, discussed below.) The following multiple of five is the number of the darkest color in that family, although not necessarily the same hue as the multiple of ten color number. Color numbers between the multiple of ten and the following multiple of five are shades of colors entirely within the family. Color numbers in the four <em>before</em> the multiple of ten are mixtures of this family and the one before it. So, for example, in the green family, we have</p>
<ul>
<li><p>55 Darkest yellow.</p></li>
<li><p>(55, 60) shades of yellow-green mixtures. As the color number increases, both the hue and the lightness (or value, depending on your religion) increase, so we get brighter and greener colors.</p></li>
<li><p>60 Canonical green, [0, 255, 0], whose W3C color name is “lime,” not “green.”</p></li>
<li><p>(60, 65) Shades of green. No cyan mixed in.</p></li>
<li><p>65 Darkest green.</p></li>
<li><p>(65,70) Shades of green-cyan mixtures.</p></li>
</ul>
<p>In the color number chart <span></span>, all the dark color numbers look a lot like black, but they’re quite different. Here are the darkest colors in each color number family.</p>
<p><img src="assets/image1261.png" class="img-fluid" alt="image1261.png"> <!--  style="width:1.38889in;height:1.38889in" alt="Macintosh HD:Users:bh:Desktop:darkest.png" / --></p>
<p>Darkest yellow doesn’t look entirely yellow. You might see it as greenish or brownish. As it turns out, the darkest color that really looks yellow is hardly dark at all. This color was hand-tweaked to look neither green nor brown to me, but ymmv.</p>
<p>In some families, the center+5 <em>crayon</em> is an important named darker version of the center color: In the red family, [128, 0, 0] is “maroon.” In the cyan family, [0, 128, 128] is “teal.” An early version of the color number scale used these named shades as the center+5 color number also. But on this page we use the word “darkest” advisedly: You can’t find a darker shade of this family anywhere in the color number scale, but you <em>can</em> find lighter shades. Teal is color number 73.1, (<span class="math inline">\(70 + 5 \bullet \frac{255 - 128}{255 - 50}\)</span>), because darkest cyan, color 75, is [0, 50, 50]. The color number for maroon is left as an exercise for the reader.</p>
<p>The purple family is different from the others, because it has to include both spectral violet and extraspectral RGB magenta. Violet is usually given as RGB [128, 0, 255], but that’s much brighter than the violet in an actual spectrum (see page <a href="#rainbow">142</a>). We use [80, 0, 90], a value hand-tweaked to look as much as possible like the violet in rainbow photos, as color number 90. (<em>Crayon</em> 90 is [128, 0, 255].) Magenta, [255, 0, 255], is color number 95. This means that the colors get <em>brighter,</em> not darker, between 90 and 95. The darkest violet is actually color number 87.5, so it’s bluer than standard violet, but still plainly a purple and not a blue. It’s [39,0,76]. It’s <em>not</em> hand-tweaked; it’s a linear interpolation between darkest blue, [0, 0, 64], and the violet at color number 90. I determined by experiment that color number 87.5 is the darkest one that’s still unambiguously purple. (According to Wikipedia, “violet” names only the spectral color, while “purple” is the name of the whole color family.)</p>
<p>Here are the reference points for color numbers that are multiples of five, except for item 4, which is used for color 14, not color 15:</p>
<p><img src="assets/image1262.png" class="img-fluid" alt="image1262.png"> <!--  style="width:4.58333in;height:1.27778in" / --></p>
<p>The very pale three-input list blocks are for color numbers that are odd multiples of five, generally the “darkest” members of each color family. (The block colors were adjusted in Photoshop; don’t ask how to get blocks this color in Snap<em>!</em>.)</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../references.bib" class="pagination-link" aria-label="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../content/14-appendix-b-apl-features/index.html" class="pagination-link" aria-label="Appendix B. APL features">
        <span class="nav-page-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Appendix B. APL features</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/snap-cloud/snap-manual/edit/main/content/13-appendix-a-snap-color-library/index.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer></body></html>